sap.ui.define(["sap/ui/core/UIComponent","sap/ui/core/IconPool","playground/model/models","sap/base/util/UriParameters","sap/ui/core/routing/Router","sap/ui/core/ComponentSupport","sap/m/routing/Router"],function(e,t,o,n,i){"use strict";var s;function r(e){var t=e.split("/playground/")[1];return t.replace(/\/$/,"")}function a(e){if(e){return p()+"playground/"+e+"/"}else{return p()+"playground/"}}function p(){var e=document.baseURI;e=e.split("?")[0];var t=/\/components\/\w+\//.test(e);if(t){return e.split("playground/components")[0]}else{return e.split("playground/")[0]}}return e.extend("playground.Component",{metadata:{manifest:"json"},init:function(){this.patchRouter();e.prototype.init.apply(this,arguments);t.registerFont({fontFamily:"SAP-icons-TNT",fontURI:jQuery.sap.getModulePath("sap.tnt.themes.base.fonts")});this.setModel(o.createUIModel());this.setModel(o.createDeviceModel(),"device");this.setModel(o.createAPIModel(),"api");this.setModel(o.createComponentsModel(),"components");this.getRouter().getRoute("home").attachPatternMatched("patternMatched",function(e){this.selectView()},this);this.getRouter().getRoute("components").attachPatternMatched("patternMatched",function(e){this.selectView(e.getParameter("arguments").componentId)},this);o.discoverSamples(this.getModel()).then(function(){this.getRouter().initialize()}.bind(this))},patchRouter:function(){i.prototype.initialize=function(){this._bIsInitialized=true;this.stop();this.parse(r(location.pathname));s=function(e){console.log("popstate:",document.location.pathname);this.parse(r(document.location.pathname))}.bind(this);window.addEventListener("popstate",s);return this};var e=sap.ui.core.routing.Router.prototype.navTo;sap.ui.core.routing.Router.prototype.navTo=function(e,t){var o=this.getURL(e,t);console.log("navTo:",o);window.history.pushState({},undefined,a(o));this.parse(o)}},selectView:function(e){if(e){this.getModel().getProperty("/navigation/1/items").forEach(function(t){if(t.key===e){document.title=""+e+" - UI5 Web Components";this.getModel().setProperty("/showNavigationLinks",true);var o=this.getModel().getProperty("/selectedView").slice(this.getModel().getProperty("/selectedView").indexOf("?")+1,this.getModel().getProperty("/selectedView").length);this.getModel().setProperty("/selectedKey",e);this.getModel().setProperty("/selectedView",p()+t.url+(o?"?"+o:""))}}.bind(this))}else{document.title="Home - UI5 Web Components";this.getModel().setProperty("/showNavigationLinks",false);this.getModel().setProperty("/selectedView",p()+"www/home/")}},getFrameUrlParmaters:function(){var e=new n(window.location.href);return Object.keys(e.mParams).map(function(t){if(t.startsWith("frame-")){return t.replace("frame-","")+"="+e.get(t)}}).join("&")}})});