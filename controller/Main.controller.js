sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("playground.controller.Main",{onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getRoute("components").attachPatternMatched("patternMatched",this.updateSelectedItem,this);this.navList=this.getView().byId("nl");this.selectedItemDOMRef=null;this.CLASS_ITEM_SELECTED="sapTntNavLIItemSelected";var e=this.debounce;var t=this.scrollHandler;var n={onAfterRendering:this.updateSelectedItem.bind(this)};this.navList.addEventDelegate(n);this.getView().byId("links-list").getItems()[0].addStyleClass("selected-link");window.addEventListener("message",function(n){var s=document.getElementsByClassName("content-iframe")[0].contentDocument;var o=e(t,0);s.addEventListener("scroll",function(e){o()})},false)},debounce:function(e,t){var n;return function(){var s=this;var o=arguments;clearTimeout(n);n=setTimeout(function(){e.apply(s,o)},t)}},scrollHandler:function(){var e=document.getElementsByClassName("content-iframe")[0].contentDocument;var t=e.querySelector(".comment-api-title");var n=document.querySelectorAll(".links-list li");if(t.offsetTop<=$(e).scrollTop()){n[0].classList.remove("selected-link");n[1].classList.add("selected-link")}else{n[0].classList.add("selected-link");n[1].classList.remove("selected-link")}},itemSelect:function(e){var t=e.getParameter("item").getBindingContext();var n=t.getProperty("url");if(n){this.oRouter.navTo("components",{componentId:t.getProperty("key")})}else{this.oRouter.navTo("home")}},onSideNavButtonPress:function(){var e=this.byId("app");e.setSideExpanded(!e.getSideExpanded())},onUI5LogoPressed:function(){window.location.href=this._getHomeURL()},_getHomeURL(){if(location.hostname==="localhost"||location.hostname==="127.0.0.1"){return"/index.html"}return"/ui5-webcomponents/index.html"},updateSelectedItem:function(){var e=this.getOwnerComponent().getModel();var t=e.getProperty("/selectedKey");var n=this.navList.getItems()[1].getItems()||[];var s;if(this.selectedItemDOMRef){this.selectedItemDOMRef.classList.remove("sapTntNavLIItemSelected")}var o=n.filter(function(e){return e.getKey()===t});if(o.length){s=o[0].getDomRef()}if(s){this.selectedItemDOMRef=s;this.selectedItemDOMRef.classList.add("sapTntNavLIItemSelected")}},toggleSettingsMenu:function(){var e=this.getOwnerComponent().getModel();e.setProperty("/showSettingsMenu",!e.getProperty("/showSettingsMenu"))},closeSettingsMenu:function(){var e=this.getOwnerComponent().getModel();e.setProperty("/showSettingsMenu",false)},applyChangeSettings:function(){var e=this.getOwnerComponent().getModel();var t=$("iframe")[0];var n=[];var s=document.body;var o;var i=e.getProperty("/selectedView");var a;if(!t){return}o=i.indexOf("?")===-1?i.length:i.indexOf("?");a=i.slice(0,o);n.push({name:"sap-ui-theme",value:this.byId("theme-cb").getSelectedItem().getKey()||"sap_fiori_3"});n.push({name:"sap-ui-compactSize",value:this.byId("content-densit-cb").getSelectedItem().getKey()||"false"});n.push({name:"sap-ui-rtl",value:this.byId("direction-cb").getSelectedItem().getKey()||"false"});if(n.length){a+="?";a+=n.map(function(e){return e.name+"="+e.value}).join("&")}e.setProperty("/selectedView","");e.setProperty("/selectedView",a);if(this.byId("theme-cb").getSelectedItem().getKey()==="sap_belize_hcb"){s.classList.add("hcb")}else{s.classList.remove("hcb")}this.closeSettingsMenu()},onLinkPressed:function(e){var t=e.getParameters().listItem.getText().toLowerCase();var n;this.getOwnerComponent().getModel().setProperty("/showSettingsMenu",false);switch(t){case"samples":n="body";break;case"api reference":n=".comment-api-title";break;default:break}setTimeout(function(){document.querySelector(".content-iframe").contentDocument.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})},0)}})});